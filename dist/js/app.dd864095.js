(function(e){function t(t){for(var n,c,o=t[0],i=t[1],u=t[2],l=0,p=[];l<o.length;l++)c=o[l],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&p.push(a[c][0]),a[c]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);d&&d(t);while(p.length)p.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,o=1;o<r.length;o++){var i=r[o];0!==a[i]&&(n=!1)}n&&(s.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={app:0},s=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/UptaleDataAnalysis/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var d=i;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"063f":function(e,t,r){},"111c":function(e,t,r){"use strict";r("6f2d")},1603:function(e,t,r){"use strict";r("ab01")},"19b0":function(e,t,r){},"221b":function(e,t,r){},"332b":function(e,t,r){},"37cd":function(e,t,r){"use strict";r("aeb1")},4905:function(e,t,r){"use strict";r("e2b3")},"49e5":function(e,t,r){"use strict";r("a767")},"4d9d":function(e,t,r){},5261:function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23"),a=r("1da1"),s=(r("96cf"),r("5502")),c=r("d4ec"),o=r("bee2"),i=r("ade3"),u=(r("d3b7"),function(){function e(t){var r=this;Object(c["a"])(this,e),Object(i["a"])(this,"worker",void 0),Object(i["a"])(this,"_queue",[]),Object(i["a"])(this,"id",0),this.worker=t,this.worker.onmessage=function(e){"progress"==e.data.type?r.onProgress(e.data):(r._queue[e.data.id].resolve(e.data),delete r._queue[e.data.id])},this.worker.onerror=function(e){r._queue[e.data.id].reject(e.data),delete r._queue[e.data.id]}}return Object(o["a"])(e,[{key:"send",value:function(e){var t=this;if(null==e.id)throw"Data sent to worker does not contains an ID";if(this._queue[e.id])throw"Duplicate ID in data sent to worker";var r=new Promise((function(r,n){t.worker.postMessage(e),t._queue[e.id]={resolve:r,reject:n}}));return r}}]),e}());r("ddb0"),r("159b"),r("b0c0"),r("07ac");function d(e){return(null===e||void 0===e?void 0:e.values.reduce((function(t,r){var n={};return r.forEach((function(t,r){n[e.columns[r]]=t})),t.push(n),t}),[]))||[]}function l(e,t,r){return p.apply(this,arguments)}function p(){return p=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.send({id:t.id++,action:"exec",sql:r,params:n});case 2:return a=e.sent,a=a&&a.results?a.results[0]:null,e.abrupt("return",d(a));case 5:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function f(e){return b.apply(this,arguments)}function b(){return b=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",l(t,'SELECT \n            Scenes.Id, \n            Scenes.Name, \n            Categories.Id AS "CategoryId",\n            Categories.Name AS "CategoryName", \n            Categories.Color AS "CategoryColor",\n            Themes.Id AS "ThemeId", \n            Themes.Name AS "ThemeName", \n            Themes.Color AS "ThemeColor" \n        FROM Scenes \n        LEFT JOIN Categories \n            ON Categories.Id = Scenes.CategoryId \n        LEFT JOIN Themes \n            ON Themes.Id = Scenes.ThemeId'));case 1:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function m(e){return O.apply(this,arguments)}function O(){return O=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",l(t,"SELECT Id, Name, Color FROM Categories"));case 1:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function h(e,t){return g.apply(this,arguments)}function g(){return g=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",l(t,"INSERT INTO Categories (Name, Color) VALUES ($name, $color)",{$name:r.name,$color:r.color}));case 1:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function j(e,t){return y.apply(this,arguments)}function y(){return y=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",l(t,"UPDATE Categories SET Color = $color WHERE Id = $id",{$id:r.id,$color:r.color}));case 1:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function v(e,t){return I.apply(this,arguments)}function I(){return I=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",l(t,"DELETE FROM Categories WHERE Id = $id",{$id:r.id}));case 1:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function k(e){return S.apply(this,arguments)}function S(){return S=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",l(t,"SELECT Id, Name, Color FROM Themes"));case 1:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function U(e,t){return N.apply(this,arguments)}function N(){return N=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",l(t,"INSERT INTO Themes (Name, Color) VALUES ($name, $color);",{$name:r.name,$color:r.color}));case 1:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function w(e,t){return D.apply(this,arguments)}function D(){return D=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",l(t,"UPDATE Themes SET Color = $color WHERE Id = $id",{$id:r.id,$color:r.color}));case 1:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function E(e,t){return C.apply(this,arguments)}function C(){return C=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",l(t,"DELETE FROM Themes WHERE Id = $id",{$id:r.id}));case 1:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function T(e,t){return R.apply(this,arguments)}function R(){return R=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",l(t,"UPDATE Scenes SET CategoryId = $categoryId, ThemeId = $themeId WHERE Id = $id",{$id:r.sceneId,$categoryId:r.categoryId,$themeId:r.themeId}));case 1:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function x(e){return G.apply(this,arguments)}function G(){return G=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l(t,'SELECT \n    Users.Id AS "UserId",\n    Users.Name AS "UserName",\n    UsersGroups.Id AS "UserGroupId",\n    UsersGroups.Name AS "UserGroupName",\n    UsersGroups.Color AS "UserGroupColor",\n    UsersGroups.Type AS "UserGroupType"\n  FROM Users\n  LEFT JOIN UserGroupAssociation ON UserGroupAssociation.UserId = Users.Id\n  LEFT JOIN UsersGroups ON UsersGroups.Id = UserGroupAssociation.UserGroupId;');case 2:return r=e.sent,r=Object.values(r.reduce((function(e,t){return e[t.UserId]||(e[t.UserId]={Id:t.UserId,Name:t.UserName,Groups:[]}),e[t.UserId].Groups.push({Id:t.UserGroupId,Name:t.UserGroupName,Type:t.UserGroupType,Color:t.UserGroupColor}),e}),{})),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}function A(e){return L.apply(this,arguments)}function L(){return L=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",l(t,"SELECT Id, Name, Color, Type FROM UsersGroups"));case 1:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}function $(e,t){return _.apply(this,arguments)}function _(){return _=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",l(t,"INSERT INTO UsersGroups (Name, Color) VALUES ($name, $color)",{$name:r.name,$color:r.color}));case 1:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function W(e,t){return M.apply(this,arguments)}function M(){return M=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",l(t,"UPDATE UsersGroups SET Color = $color WHERE Id = $id",{$id:r.id,$color:r.color}));case 1:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function P(e,t){return F.apply(this,arguments)}function F(){return F=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",l(t,"DELETE FROM UsersGroups WHERE Id = $id",{$id:r.id}));case 1:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function H(e,t){return V.apply(this,arguments)}function V(){return V=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",l(t,"UPDATE Users SET UserGroupId = $userGroupId WHERE Id = $id",{$id:r.id,$userGroupId:r.userGroupId}));case 1:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}function q(e,t){return z.apply(this,arguments)}function z(){return z=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",l(t,"INSERT INTO UserGroupAssociation (UserId, UserGroupId) VALUES ($UserId, $UserGroupId)",{$UserId:r.UserId,$UserGroupId:r.UserGroupId}));case 1:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function J(e,t){return B.apply(this,arguments)}function B(){return B=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",l(t,"DELETE FROM UserGroupAssociation WHERE UserId = $UserId AND UserGroupId = $UserGroupId",{$UserId:r.UserId,$UserGroupId:r.UserGroupId}));case 1:case"end":return e.stop()}}),e)}))),B.apply(this,arguments)}function Q(e,t){return Y.apply(this,arguments)}function Y(){return Y=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.send({id:t.id++,action:"exec",sql:r});case 2:if(n=e.sent,!n.error){e.next=5;break}throw n.error;case 5:return console.log("output",n.results[0].columns),console.table(n.results[0].values),n=n&&n.results?n.results[0]:null,e.abrupt("return",{data:n,dataObject:d(n)});case 9:case"end":return e.stop()}}),e)}))),Y.apply(this,arguments)}var K=new u(new Worker("/scripts/workers/database.js")),X=Object(s["a"])({state:function(){return{scenes:[],categories:[],themes:[],users:[],usersGroups:[],progress:{progress:0,message:""},isLoading:0,sqlWorker:K}},mutations:{setData:function(e,t){var r=t.key,n=t.value;e[r]=n},incrementWorkerId:function(e){return e.sqlWorker.id++}},actions:{computeData:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.commit,e.state,n("setData",{key:"IsLoading",value:0}),!t.database){r.next=7;break}return r.next=5,K.send({id:K.id++,action:"open",buffer:t.database});case 5:r.next=11;break;case 7:return r.next=9,K.send({id:K.id++,action:"open"});case 9:return r.next=11,K.send({id:K.id++,action:"extractCSVData",files:t});case 11:return r.t0=n,r.next=14,f(K);case 14:return r.t1=r.sent,r.t2={key:"scenes",value:r.t1},(0,r.t0)("setData",r.t2),r.t3=n,r.next=20,m(K);case 20:return r.t4=r.sent,r.t5={key:"categories",value:r.t4},(0,r.t3)("setData",r.t5),r.t6=n,r.next=26,k(K);case 26:return r.t7=r.sent,r.t8={key:"themes",value:r.t7},(0,r.t6)("setData",r.t8),r.t9=n,r.next=32,x(K);case 32:return r.t10=r.sent,r.t11={key:"users",value:r.t10},(0,r.t9)("setData",r.t11),r.t12=n,r.next=38,A(K);case 38:r.t13=r.sent,r.t14={key:"usersGroups",value:r.t13},(0,r.t12)("setData",r.t14),n("setData",{key:"IsLoading",value:2}),n("setData",{key:"IsLoading",value:0});case 43:case"end":return r.stop()}}),r)})))()},addCategory:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.state,n("setData",{key:"IsLoading",value:1}),r.next=4,h(K,t);case 4:return r.t0=n,r.next=7,m(K);case 7:r.t1=r.sent,r.t2={key:"categories",value:r.t1},(0,r.t0)("setData",r.t2),n("setData",{key:"IsLoading",value:0});case 11:case"end":return r.stop()}}),r)})))()},addTheme:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.state,n("setData",{key:"IsLoading",value:1}),r.next=4,U(K,t);case 4:return r.t0=n,r.next=7,k(K);case 7:r.t1=r.sent,r.t2={key:"themes",value:r.t1},(0,r.t0)("setData",r.t2),n("setData",{key:"IsLoading",value:0});case 11:case"end":return r.stop()}}),r)})))()},addUserGroup:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.state,n("setData",{key:"IsLoading",value:1}),r.next=4,$(K,t);case 4:return r.t0=n,r.next=7,A(K);case 7:r.t1=r.sent,r.t2={key:"usersGroups",value:r.t1},(0,r.t0)("setData",r.t2),n("setData",{key:"IsLoading",value:0});case 11:case"end":return r.stop()}}),r)})))()},addUserGroupAssociation:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.state,n("setData",{key:"IsLoading",value:1}),r.next=4,q(K,t);case 4:return r.t0=n,r.next=7,x(K);case 7:r.t1=r.sent,r.t2={key:"users",value:r.t1},(0,r.t0)("setData",r.t2),n("setData",{key:"IsLoading",value:0});case 11:case"end":return r.stop()}}),r)})))()},updateCategory:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.state,n("setData",{key:"IsLoading",value:1}),r.next=4,j(K,t);case 4:return r.t0=n,r.next=7,m(K);case 7:return r.t1=r.sent,r.t2={key:"categories",value:r.t1},(0,r.t0)("setData",r.t2),r.t3=n,r.next=13,f(K);case 13:r.t4=r.sent,r.t5={key:"scenes",value:r.t4},(0,r.t3)("setData",r.t5),n("setData",{key:"IsLoading",value:0});case 17:case"end":return r.stop()}}),r)})))()},updateTheme:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.state,n("setData",{key:"IsLoading",value:1}),r.next=4,w(K,t);case 4:return r.t0=n,r.next=7,k(K);case 7:return r.t1=r.sent,r.t2={key:"themes",value:r.t1},(0,r.t0)("setData",r.t2),r.t3=n,r.next=13,f(K);case 13:r.t4=r.sent,r.t5={key:"scenes",value:r.t4},(0,r.t3)("setData",r.t5),n("setData",{key:"IsLoading",value:0});case 17:case"end":return r.stop()}}),r)})))()},updateScene:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.state,n("setData",{key:"IsLoading",value:1}),r.next=4,T(K,t);case 4:return r.t0=n,r.next=7,f(K);case 7:r.t1=r.sent,r.t2={key:"scenes",value:r.t1},(0,r.t0)("setData",r.t2),n("setData",{key:"IsLoading",value:0});case 11:case"end":return r.stop()}}),r)})))()},updateUserGroup:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.state,n("setData",{key:"IsLoading",value:1}),r.next=4,W(K,t);case 4:return r.t0=n,r.next=7,A(K);case 7:return r.t1=r.sent,r.t2={key:"usersGroups",value:r.t1},(0,r.t0)("setData",r.t2),r.t3=n,r.next=13,x(K);case 13:r.t4=r.sent,r.t5={key:"users",value:r.t4},(0,r.t3)("setData",r.t5),n("setData",{key:"IsLoading",value:0});case 17:case"end":return r.stop()}}),r)})))()},updateUser:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.state,n("setData",{key:"IsLoading",value:1}),r.next=4,H(K,t);case 4:return r.t0=n,r.next=7,x(K);case 7:r.t1=r.sent,r.t2={key:"users",value:r.t1},(0,r.t0)("setData",r.t2),n("setData",{key:"IsLoading",value:0});case 11:case"end":return r.stop()}}),r)})))()},deleteUserGroup:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.state,n("setData",{key:"IsLoading",value:1}),r.next=4,P(K,t);case 4:return r.t0=n,r.next=7,A(K);case 7:return r.t1=r.sent,r.t2={key:"usersGroups",value:r.t1},(0,r.t0)("setData",r.t2),r.t3=n,r.next=13,x(K);case 13:r.t4=r.sent,r.t5={key:"users",value:r.t4},(0,r.t3)("setData",r.t5),n("setData",{key:"IsLoading",value:0});case 17:case"end":return r.stop()}}),r)})))()},deleteCategory:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.state,n("setData",{key:"IsLoading",value:1}),r.next=4,v(K,t);case 4:return r.t0=n,r.next=7,f(K);case 7:return r.t1=r.sent,r.t2={key:"scenes",value:r.t1},(0,r.t0)("setData",r.t2),r.t3=n,r.next=13,m(K);case 13:r.t4=r.sent,r.t5={key:"categories",value:r.t4},(0,r.t3)("setData",r.t5),n("setData",{key:"IsLoading",value:0});case 17:case"end":return r.stop()}}),r)})))()},deleteTheme:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.state,n("setData",{key:"IsLoading",value:1}),r.next=4,E(K,t);case 4:return r.t0=n,r.next=7,f(K);case 7:return r.t1=r.sent,r.t2={key:"scenes",value:r.t1},(0,r.t0)("setData",r.t2),r.t3=n,r.next=13,k(K);case 13:r.t4=r.sent,r.t5={key:"themes",value:r.t4},(0,r.t3)("setData",r.t5),n("setData",{key:"IsLoading",value:0});case 17:case"end":return r.stop()}}),r)})))()},deleteUserGroupAssociation:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.state,n("setData",{key:"IsLoading",value:1}),r.next=4,J(K,t);case 4:return r.t0=n,r.next=7,x(K);case 7:r.t1=r.sent,r.t2={key:"users",value:r.t1},(0,r.t0)("setData",r.t2),n("setData",{key:"IsLoading",value:0});case 11:case"end":return r.stop()}}),r)})))()}}});K.onProgress=function(e){X.commit("setData",{key:"progress",value:0})};var Z=["href"],ee={key:0},te={key:1,id:"container"},re={key:2},ne=["hidden"],ae=["hidden"];function se(e,t,r,a,s,c){var o=Object(n["u"])("Sidebar"),i=Object(n["u"])("Header"),u=Object(n["u"])("SceneList"),d=Object(n["u"])("UsersSetup"),l=Object(n["u"])("Analysis"),p=Object(n["u"])("QueryGenerator"),f=Object(n["u"])("SQLPlayground");return Object(n["n"])(),Object(n["g"])(n["a"],null,[Object(n["j"])(o,{onSidebar_click:c.sidebarManager},null,8,["onSidebar_click"]),Object(n["h"])("a",{id:"download",display:"none",href:s.serializedDatabaseURL,download:"database.db"},null,8,Z),Object(n["h"])("div",{id:"nav",style:Object(n["m"])({"margin-left":a.sidebarWidth})},[Object(n["j"])(i,{id:"Header",title:"",onDownloadDatabase:c.downloadDatabase},null,8,["onDownloadDatabase"]),"categories"==s.display?(Object(n["n"])(),Object(n["g"])("div",ee,[Object(n["j"])(u)])):Object(n["f"])("",!0),"Users"==s.display?(Object(n["n"])(),Object(n["g"])("div",te,[Object(n["j"])(d)])):Object(n["f"])("",!0),"Analysis"==s.display?(Object(n["n"])(),Object(n["g"])("div",re,[Object(n["j"])(l)])):Object(n["f"])("",!0),Object(n["h"])("div",{hidden:!("QueryGenerator"==s.display)},[Object(n["j"])(p)],8,ne),Object(n["h"])("div",{id:"container",hidden:!("SQL"==s.display)},[Object(n["j"])(f)],8,ae)],4)],64)}r("3ca3"),r("2b3d"),r("9861");var ce=function(e){return Object(n["p"])("data-v-24b045ad"),e=e(),Object(n["o"])(),e},oe=ce((function(){return Object(n["h"])("input",{id:"categoryName",type:"text",placeholder:"add category"},null,-1)})),ie=[oe],ue=ce((function(){return Object(n["h"])("input",{id:"themeName",type:"text",placeholder:"add theme"},null,-1)})),de=[ue],le={id:"sceneList"},pe={id:"categoryList"},fe={class:"sticky"},be={id:"themeList"},me={class:"sticky"};function Oe(e,t,r,a,s,c){var o=Object(n["u"])("Scene"),i=Object(n["u"])("SceneProperty");return Object(n["n"])(),Object(n["g"])(n["a"],null,[Object(n["h"])("form",{onSubmit:t[0]||(t[0]=function(){return c.addCategory&&c.addCategory.apply(c,arguments)})},ie,32),Object(n["h"])("form",{onSubmit:t[1]||(t[1]=function(){return c.addTheme&&c.addTheme.apply(c,arguments)})},de,32),Object(n["h"])("div",le,[(Object(n["n"])(!0),Object(n["g"])(n["a"],null,Object(n["s"])(c.scenes,(function(e){return Object(n["n"])(),Object(n["e"])(o,{key:e.Id,scene:e,onUpdateScene:c.updateScene},null,8,["scene","onUpdateScene"])})),128)),Object(n["h"])("div",pe,[Object(n["h"])("div",fe,[(Object(n["n"])(!0),Object(n["g"])(n["a"],null,Object(n["s"])(c.categories,(function(e){return Object(n["n"])(),Object(n["e"])(i,{key:e.Id,id:e.Id,name:e.Name,color:e.Color,persistent:!0,type:"category",onDeleteProperty:c.deleteCategory,onUpdateProperty:c.updateCategory},null,8,["id","name","color","onDeleteProperty","onUpdateProperty"])})),128))])]),Object(n["h"])("div",be,[Object(n["h"])("div",me,[(Object(n["n"])(!0),Object(n["g"])(n["a"],null,Object(n["s"])(c.themes,(function(e){return Object(n["n"])(),Object(n["e"])(i,{key:e.Id,id:e.Id,name:e.Name,color:e.Color,persistent:!0,type:"theme",onDeleteProperty:c.deleteTheme,onUpdateProperty:c.updateTheme},null,8,["id","name","color","onDeleteProperty","onUpdateProperty"])})),128))])])])],64)}function he(e,t,r,a,s,c){var o=Object(n["u"])("SceneProperty");return Object(n["n"])(),Object(n["g"])("div",{class:"scene",onDragenter:t[0]||(t[0]=function(){return c.dragEnter&&c.dragEnter.apply(c,arguments)}),onDragleave:t[1]||(t[1]=function(){return c.dragLeave&&c.dragLeave.apply(c,arguments)}),onDragover:t[2]||(t[2]=function(){return c.dragOver&&c.dragOver.apply(c,arguments)}),onDrop:t[3]||(t[3]=function(){return c.drop&&c.drop.apply(c,arguments)}),style:Object(n["m"])({border:"1px solid "+s.border_color})},[Object(n["h"])("span",null,Object(n["v"])(r.scene.Name),1),Object(n["j"])(o,{id:r.scene.CategoryId,name:r.scene.CategoryName,color:r.scene.CategoryColor,type:"category",border:s.borders.category},null,8,["id","name","color","border"]),Object(n["j"])(o,{id:r.scene.ThemeId,name:r.scene.ThemeName,color:r.scene.ThemeColor,type:"theme",border:s.borders.theme},null,8,["id","name","color","border"])],36)}var ge=["draggable"],je={class:"propertyName"},ye=["value"];function ve(e,t,r,a,s,c){return Object(n["n"])(),Object(n["g"])("span",{class:Object(n["l"])(["container",r.persistent?"persistent":null]),onDragstart:t[2]||(t[2]=function(){return c.dragStart&&c.dragStart.apply(c,arguments)}),onDragend:t[3]||(t[3]=function(){return c.dragEnd&&c.dragEnd.apply(c,arguments)}),style:Object(n["m"])({background:r.color,opacity:s.opacity,border:r.border}),draggable:!!this.persistent},[Object(n["h"])("span",je,Object(n["v"])(r.name),1),r.persistent?(Object(n["n"])(),Object(n["g"])("input",{key:0,type:"color",value:r.color,onChange:t[0]||(t[0]=function(){return c.colorchange&&c.colorchange.apply(c,arguments)})},null,40,ye)):Object(n["f"])("",!0),r.persistent?(Object(n["n"])(),Object(n["g"])("button",{key:1,onClick:t[1]||(t[1]=function(){return c.deleteProperty&&c.deleteProperty.apply(c,arguments)})},"Delete")):Object(n["f"])("",!0)],46,ge)}var Ie={name:"SceneProperty",data:function(){return{opacity:1}},emits:["deleteProperty","updateProperty"],props:{id:"",color:"",name:"",persistent:{type:Boolean,default:!1},type:{type:String,default:"category"},border:{type:String,default:""}},methods:{dragStart:function(e){e.dropEffect="move",e.dataTransfer.effectAllowed=this.persistent?"copy":"move",e.dataTransfer.setData("Id",this.id),e.dataTransfer.setData("type",this.type),this.opacity=.5},dragEnd:function(){this.opacity=1},colorchange:function(e){this.$emit("updateProperty",{color:e.srcElement.value,id:this.id})},deleteProperty:function(){this.$emit("deleteProperty",{id:this.id})}}},ke=(r("b869"),r("d959")),Se=r.n(ke);const Ue=Se()(Ie,[["render",ve],["__scopeId","data-v-46de3cf3"]]);var Ne=Ue,we={name:"Scene",emits:["updateScene"],components:{SceneProperty:Ne},data:function(){return{border_color:"transparent",borders:{category:null,theme:null}}},props:{scene:{type:Object}},methods:{dragEnter:function(e){e.preventDefault()},dragLeave:function(e){this.border_color="transparent",this.borders[e.dataTransfer.getData("type")]=null},dragOver:function(e){e.preventDefault(),this.border_color="black",this.borders[e.dataTransfer.getData("type")]="2px solid red"},drop:function(e){e.preventDefault(),this.border_color="transparent",this.borders[e.dataTransfer.getData("type")]=null,"theme"==e.dataTransfer.getData("type")?this.scene.ThemeId=e.dataTransfer.getData("Id"):"category"==e.dataTransfer.getData("type")&&(this.scene.CategoryId=e.dataTransfer.getData("Id")),this.$emit("updateScene",{sceneId:this.scene.Id,categoryId:this.scene.CategoryId,themeId:this.scene.ThemeId})}}};r("93a8");const De=Se()(we,[["render",he],["__scopeId","data-v-f86c4c40"]]);var Ee=De,Ce={name:"SceneList",components:{Scene:Ee,SceneProperty:Ne},computed:{scenes:function(){return this.$store.state.scenes},categories:function(){return this.$store.state.categories},themes:function(){return this.$store.state.themes}},methods:{addCategory:function(e){e.preventDefault(),this.$store.dispatch("addCategory",{name:e.srcElement.querySelector("#categoryName").value,color:"#ffffff"})},addTheme:function(e){e.preventDefault(),this.$store.dispatch("addTheme",{name:e.srcElement.querySelector("#themeName").value,color:"#ffffff"})},updateCategory:function(e){this.$store.dispatch("updateCategory",e)},updateTheme:function(e){this.$store.dispatch("updateTheme",e)},updateScene:function(e){this.$store.dispatch("updateScene",e)},deleteCategory:function(e){this.$store.dispatch("deleteCategory",e)},deleteTheme:function(e){this.$store.dispatch("deleteTheme",e)}}};r("dc8a");const Te=Se()(Ce,[["render",Oe],["__scopeId","data-v-24b045ad"]]);var Re=Te,xe={id:"area",ref:"area",autonomplete:"on",autocorrect:"off",spellcheck:"off"},Ge=["href"];function Ae(e,t,r,a,s,c){var o=Object(n["u"])("ViewTable");return Object(n["n"])(),Object(n["g"])(n["a"],null,[Object(n["h"])("textarea",xe,null,512),s.downloadDataURL?(Object(n["n"])(),Object(n["g"])("a",{key:0,href:s.downloadDataURL,download:"result.csv"},"Download Results",8,Ge)):Object(n["f"])("",!0),Object(n["j"])(o,{data:{columns:s.data.columns,values:s.reducedValues}},null,8,["data"])],64)}var Le=r("2909"),$e=(r("a434"),r("99af"),r("4ec9"),r("d81d"),r("ac1f"),r("1276"),r("7db0"),r("2ca0"),function(e){var t=[];return e.forEach((function(e,r){e.id=r,t.push(e)})),t}),_e=function(e){return new Promise((function(t){setTimeout((function(){t()}),e)}))},We=(r("4e82"),["onClick"]);function Me(e,t,r,a,s,c){return Object(n["n"])(),Object(n["g"])("table",null,[Object(n["i"])(Object(n["v"])(r.title)+" ",1),Object(n["h"])("tr",null,[(Object(n["n"])(!0),Object(n["g"])(n["a"],null,Object(n["s"])(r.data.columns,(function(e,t){return Object(n["n"])(),Object(n["g"])("th",{key:e,onClick:function(r){return c.sort(e,t)}},Object(n["v"])(e+(s.sortIndex==t?s.sortDirection?"▲":"▼":" ")),9,We)})),128))]),(Object(n["n"])(!0),Object(n["g"])(n["a"],null,Object(n["s"])(c.sortedValues,(function(e,t){return Object(n["n"])(),Object(n["g"])("tr",{key:e},[(Object(n["n"])(!0),Object(n["g"])(n["a"],null,Object(n["s"])(e,(function(e,a){return Object(n["n"])(),Object(n["g"])("td",{key:e,style:Object(n["m"])(r.compare?{background:c.gradientSortedValues[t][a]}:null)},Object(n["v"])(e),5)})),128))])})),128))])}var Pe={name:"ViewTable",components:{},data:function(){return{sortIndex:0,sortDirection:!1}},computed:{sortedValues:function(){var e=this;return this.data.values.sort((function(t,r){var n=t[e.sortIndex],a=r[e.sortIndex],s=0;return n<a&&(s=-1),n>a&&(s=1),e.sortDirection&&(s*=-1),s}))},gradientSortedValues:function(){var e,t=this,r=[];return null===(e=this.compare)||void 0===e||e.forEach((function(e){var n=t.data.columns.indexOf(e.sorter),a=e.keys.map((function(e){return t.data.columns.indexOf(e.name)}));t.sortedValues.forEach((function(s,c){r[c]||(r[c]=[]);var o=Math.max.apply(Math,Object(Le["a"])(t.sortedValues.map((function(e){return Math.abs(e[a[0]]-e[a[1]])})))),i=(s[a[0]]-s[a[1]])/o;r[c][n]=i>0?"linear-gradient(90deg, #ffffff ".concat(50-50*i,"%, ").concat(e.keys[0].color," ").concat(50-50*i,"%,  ").concat(e.keys[0].color," 50%,  #ffffff 50%)"):"linear-gradient(90deg, #ffffff 50%, ".concat(e.keys[1].color," 50%,").concat(e.keys[1].color," ").concat(50-50*i,"%,\n            #ffffff ").concat(50-50*i,"%\n            )")}))})),r}},props:{title:null,data:{columns:[],values:[]},compare:Array},methods:{sort:function(e,t){this.sortIndex==t?this.sortDirection=!this.sortDirection:(this.sortIndex=t,this.sortDirection=!1)}}};r("8a3c");const Fe=Se()(Pe,[["render",Me],["__scopeId","data-v-6a663299"]]);var He=Fe,Ve={name:"SQLPlayground",emits:["SQLRequest","progress"],components:{ViewTable:He},data:function(){return{data:{columns:[],values:[]},dataObject:{},downloadDataURL:null,reducedValues:[],reducedInterval:0,codeMirror:null}},watch:{dataObject:function(){URL.revokeObjectURL(this.downloadDataURL),this.downloadDataURL=URL.createObjectURL(new Blob([d3.csvFormat(this.dataObject)],{type:"text/csv"}))},data:function(){this.showData()}},props:{columns:Array,values:Array},mounted:function(){var e;this.codeMirror=CodeMirror.fromTextArea(this.$refs.area,(e={lineNumbers:!0,mode:"text/x-mysql",viewportMargin:1/0,indentWithTabs:!0,smartIndent:!0},Object(i["a"])(e,"lineNumbers",!0),Object(i["a"])(e,"matchBrackets",!0),Object(i["a"])(e,"autofocus",!0),Object(i["a"])(e,"extraKeys",{"Ctrl-Enter":this.execEditorContents}),e))},methods:{execEditorContents:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Q(e.$store.state.sqlWorker,e.codeMirror.getValue()+";");case 2:r=t.sent,e.data=r.data,e.dataObject=r.dataObject;case 5:case"end":return t.stop()}}),t)})))()},showData:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return clearInterval(e.reducedInterval),e.$store.commit("setData",{key:"progress",value:{progress:100}}),r=15,n=25,t.next=6,_e(r);case 6:e.reducedValues=[],a=Object(Le["a"])(e.data.values),s=e.data.values.length,c=0,e.reducedInterval=setInterval((function(){var t=a.splice(n);e.reducedValues=[].concat(Object(Le["a"])(e.reducedValues),Object(Le["a"])(a)),a=t,c=e.reducedValues.length,e.$store.commit("setData",{key:"progress",value:{progress:100*c/s,message:"Displaying results\n".concat(c,"/").concat(s,"\nCSV ready")}}),0==a.length&&clearInterval(e.reducedInterval)}),r);case 11:case"end":return t.stop()}}),t)})))()}}};r("a869"),r("c4dd");const qe=Se()(Ve,[["render",Ae],["__scopeId","data-v-4b63d529"]]);var ze=qe,Je=["value"];function Be(e,t,r,a,s,c){return Object(n["n"])(),Object(n["g"])("select",{onChange:t[0]||(t[0]=function(e){return c.changeFocusedTable(e.target.value)})},[(Object(n["n"])(!0),Object(n["g"])(n["a"],null,Object(n["s"])(s.tables,(function(e){return Object(n["n"])(),Object(n["g"])("option",{key:e,value:e.name},Object(n["v"])(e.name),9,Je)})),128))],32)}var Qe={name:"QueryGenerator",emits:[],components:{},data:function(){return{tables:[]}},created:function(){var e=this;l(this.$store.state.sqlWorker,"SELECT \n            name\n        FROM \n            sqlite_schema\n        WHERE \n            type ='table' AND \n            name NOT LIKE 'sqlite_%';").then((function(t){e.tables=t,console.log(e.tables)}))},computed:{},watch:{},props:{},mounted:function(){},methods:{changeFocusedTable:function(e){console.log(e)}}};const Ye=Se()(Qe,[["render",Be]]);var Ke=Ye,Xe=function(e){return Object(n["p"])("data-v-2a13370a"),e=e(),Object(n["o"])(),e},Ze=Object(n["i"])(" Visite des Scenes "),et=Xe((function(){return Object(n["h"])("th",null,"Focus",-1)})),tt=["onChange"];function rt(e,t,r,a,s,c){var o=Object(n["u"])("ViewTable");return Object(n["n"])(),Object(n["g"])(n["a"],null,[Object(n["h"])("table",null,[Ze,Object(n["h"])("tr",null,[et,(Object(n["n"])(!0),Object(n["g"])(n["a"],null,Object(n["s"])(s.columns,(function(e){return Object(n["n"])(),Object(n["g"])("th",{key:e},Object(n["v"])(e),1)})),128))]),(Object(n["n"])(!0),Object(n["g"])(n["a"],null,Object(n["s"])(s.values,(function(e){return Object(n["n"])(),Object(n["g"])("tr",{key:e},[Object(n["h"])("td",null,[Object(n["h"])("input",{type:"checkbox",name:"focus",onChange:function(t){return c.changeSceneFocus(e[0],t)}},null,40,tt)]),(Object(n["n"])(!0),Object(n["g"])(n["a"],null,Object(n["s"])(e,(function(e){return Object(n["n"])(),Object(n["g"])("td",{key:e},Object(n["v"])(e),1)})),128))])})),128))]),Object(n["j"])(o,{title:"Clicks sur les tags",data:{columns:s.specificColumns,values:s.specificValues},compare:[{keys:[{name:"M1 Clicks",color:"#e6b122"},{name:"M2 Clicks",color:"#22e6d9"}],sorter:"Clicks Difference"},{keys:[{name:"M1 Order Avg",color:"#e6b122"},{name:"M2 Order Avg",color:"#22e6d9"}],sorter:"Order Difference"}]},null,8,["data"])],64)}r("4de4"),r("4fad");var nt={name:"Analysis",emits:[],components:{ViewTable:He},props:{sqlWorker:Object},data:function(){return{columns:[],values:[],specificColumns:[],specificValues:[],checked:{}}},created:function(){var e=this;this.$store.state.sqlWorker.send({id:this.$store.state.sqlWorker.id,action:"exec",sql:'WITH Visites AS\n                (SELECT \n                  UsersGroups.Id AS "UsersGroupsId",\n                  UsersGroups.Name AS "UserGroupName",\n                  Scenes.Name AS "SceneName",\n                  Scenes.Id AS "SceneId",\n                  Categories.Name AS "CategoryName",\n                  Categories.Id AS "Categories",\n                  \n                  ROW_NUMBER() OVER (\n                                Partition by Users.Id\n                            ) SceneOrder\n                      \n                FROM SceneVisit\n                LEFT JOIN Sessions ON Sessions.Id = SceneVisit.SessionId\n                LEFT JOIN Users ON Sessions.UserId = Users.Id\n                LEFT JOIN UserGroupAssociation ON Users.Id = UserGroupAssociation.UserId\n                LEFT JOIN UsersGroups ON UserGroupAssociation.UserGroupId = UsersGroups.Id\n                LEFT JOIN Scenes ON Scenes.Id = SceneVisit.SceneId\n                LEFT JOIN Categories ON Categories.Id = Scenes.CategoryId\n                WHERE UsersGroups.Type = "Expertise" AND Categories.Name != "Obligatoire" AND Categories.Name != "Tutoriel")\n\n                SELECT \n                  SceneId,\n                  SceneName,\n                  CategoryName,\n                  COUNT(CASE WHEN UserGroupName = "M1" THEN UserGroupName END) AS "M1 Visits",\n                  COUNT(CASE WHEN UserGroupName = "M2" THEN UserGroupName END) AS "M2 Visits",\n                  COUNT(CASE WHEN UserGroupName = "M1" THEN UserGroupName END) - COUNT(CASE WHEN UserGroupName = "M2" THEN UserGroupName END) AS "Visits Difference",\n                  ROUND(AVG(CASE WHEN UserGroupName = "M1" THEN SceneOrder END),2) AS "M1 Order Avg",\n                  ROUND(AVG(CASE WHEN UserGroupName = "M2" THEN SceneOrder END),2) AS "M2 Order Avg",\n                  ROUND(AVG(CASE WHEN UserGroupName = "M1" THEN SceneOrder END) - AVG(CASE WHEN UserGroupName = "M2" THEN SceneOrder END),2) AS "Order Difference"\n                FROM Visites \n                GROUP BY SCeneId\n                ORDER BY "Order Difference";'}).then((function(t){e.columns=t.results[0].columns,e.values=t.results[0].values})),this.$store.commit("incrementWorkerId")},watch:{},mounted:function(){},methods:{changeSceneFocus:function(e,t){var r=this;this.checked[e]=t.currentTarget.checked;var n=Object.entries(this.checked).filter((function(e){return e[1]})).map((function(e){return e[0]})),a="";n.length>0?(a+='Scenes.Id = "'.concat(n.shift(),'"'),n.forEach((function(e){a+=' OR Scenes.Id = "'.concat(e,'"')})),a="AND (".concat(a,")"),this.$store.state.sqlWorker.send({id:this.$store.state.sqlWorker.id,action:"exec",sql:'WITH \n            AllClicks AS (\n            SELECT \n              Topics.Name AS "TopicName",\n              Topics.Id AS "TopicId",\n              Scenes.Name AS "SceneName",\n              Scenes.Id AS "SceneId",\n                Categories.Name AS "CategoryName",\n                Categories.Color AS "CategoryColor",\n                Categories.Id AS "CategoryId",\n              Users.Id AS "UserId",\n              UsersGroups.Name AS "UserGroupName",\n              UsersGroups.Id AS "UserGroupId",\n              ROW_NUMBER() OVER (\n                            Partition by Users.Id\n                        ) TopicOrder\n\n            FROM TopicsClicks\n            LEFT JOIN Topics ON TopicsClicks.TopicId = Topics.Id\n            LEFT JOIN Scenes ON Topics.SceneId = Scenes.Id\n            LEFT JOIN Categories ON Categories.Id = Scenes.CategoryId\n            LEFT JOIN Sessions ON Sessions.Id = TopicsClicks.SessionId\n            LEFT JOIN Users ON Sessions.UserId = Users.Id\n            LEFT JOIN UserGroupAssociation ON Users.Id = UserGroupAssociation.UserId\n            LEFT JOIN UsersGroups ON UserGroupAssociation.UserGroupId = UsersGroups.Id\n            WHERE UsersGroups.Type = "Expertise" AND Categories.Name != "Tutoriel" AND Topics.Name NOT LIKE "Masquer%" '.concat(a,')\n\n\n            SELECT \n              TopicName, SceneName, CategoryName,\n              COUNT(CASE WHEN UserGroupName = "M1" THEN UserGroupName END) AS "M1 Clicks",\n              COUNT(CASE WHEN UserGroupName = "M2" THEN UserGroupName END) AS "M2 Clicks",\n              COUNT(CASE WHEN UserGroupName = "M1" THEN UserGroupName END) - COUNT(CASE WHEN UserGroupName = "M2" THEN UserGroupName END) AS "Clicks Difference",\n              ROUND(AVG(CASE WHEN UserGroupName = "M1" THEN TopicOrder END),2) AS "M1 Order Avg",\n              ROUND(AVG(CASE WHEN UserGroupName = "M2" THEN TopicOrder END),2) AS "M2 Order Avg",\n              ROUND(AVG(CASE WHEN UserGroupName = "M1" THEN TopicOrder END) - AVG(CASE WHEN UserGroupName = "M2" THEN TopicOrder END),2) AS "Order Difference"\n              FROM AllClicks\n              WHERE CategoryName != "Obligatoire"\n            GROUP BY TopicId\n            ORDER BY "Order Difference";')}).then((function(e){r.specificColumns=e.results[0].columns,r.specificValues=e.results[0].values})),this.$store.commit("incrementWorkerId")):(this.specificColumns=[],this.specificValues=[])}}};r("eba0");const at=Se()(nt,[["render",rt],["__scopeId","data-v-2a13370a"]]);var st=at,ct=function(e){return Object(n["p"])("data-v-0221899a"),e=e(),Object(n["o"])(),e},ot=ct((function(){return Object(n["h"])("input",{id:"userGroup",type:"text",placeholder:"add userGroup"},null,-1)})),it=[ot],ut={id:"GroupFilter"},dt=ct((function(){return Object(n["h"])("input",{type:"checkbox",checked:"true",disabled:"true"},null,-1)})),lt={id:"userList"},pt=ct((function(){return Object(n["h"])("th",null,"User",-1)})),ft=ct((function(){return Object(n["h"])("br",null,null,-1)})),bt=["value","onChange"],mt=ct((function(){return Object(n["h"])("br",null,null,-1)})),Ot=["onClick"],ht=["name","value","onClick","checked"];function gt(e,t,r,a,s,c){return Object(n["n"])(),Object(n["g"])(n["a"],null,[Object(n["h"])("form",{onSubmit:t[0]||(t[0]=Object(n["y"])((function(){return c.addUserGroup&&c.addUserGroup.apply(c,arguments)}),["prevent"]))},it,32),Object(n["h"])("div",ut,[(Object(n["n"])(!0),Object(n["g"])(n["a"],null,Object(n["s"])(c.usersGroups,(function(e){return Object(n["n"])(),Object(n["g"])("span",{key:e.Id,style:Object(n["m"])({color:e.Color})},[dt,Object(n["i"])(" "+Object(n["v"])(e.Name+" : "+e.Type),1)],4)})),128))]),Object(n["h"])("table",lt,[Object(n["h"])("tr",null,[pt,(Object(n["n"])(!0),Object(n["g"])(n["a"],null,Object(n["s"])(c.usersGroups,(function(e){return Object(n["n"])(),Object(n["g"])("th",{key:e.Id},[Object(n["i"])(Object(n["v"])(e.Name),1),ft,Object(n["h"])("input",{type:"color",value:e.Color,onChange:function(t){return c.colorchange(t,e.Id)}},null,40,bt),mt,Object(n["h"])("input",{type:"button",onClick:function(t){return c.deleteUserGroup(e.Id)},value:"Delete"},null,8,Ot)])})),128))]),(Object(n["n"])(!0),Object(n["g"])(n["a"],null,Object(n["s"])(c.users,(function(e){return Object(n["n"])(),Object(n["g"])("tr",{key:e.Id},[Object(n["h"])("td",{style:Object(n["m"])({color:e.Groups[0].Color})},Object(n["v"])(e.Id),5),(Object(n["n"])(!0),Object(n["g"])(n["a"],null,Object(n["s"])(c.usersGroups,(function(r){return Object(n["n"])(),Object(n["g"])("td",{key:r.Id,onClick:t[1]||(t[1]=function(e){return e.target.querySelector("input").click()})},[Object(n["h"])("input",{type:"checkbox",name:e.Id,value:r.Name,onClick:Object(n["y"])((function(t){return c.updateUserGroupAssociation(e,r.Id)}),["stop"]),checked:e.Groups.find((function(e){return e.Id==r.Id}))},null,8,ht)])})),128))])})),128))])],64)}var jt={name:"UsersSetup",computed:{users:function(){return this.$store.state.users},usersGroups:function(){return this.$store.state.usersGroups}},methods:{addUserGroup:function(e){this.$store.dispatch("addUserGroup",{name:e.srcElement.querySelector("#userGroup").value,color:"#ffffff"})},deleteUserGroup:function(e){this.$store.dispatch("deleteUserGroup",{id:e})},updateUserGroupAssociation:function(e,t){console.log({UserId:e.Id,UserGroupId:t}),e.Groups.find((function(e){return e.Id==t}))?this.$store.dispatch("deleteUserGroupAssociation",{UserId:e.Id,UserGroupId:t}):(console.log("add"),this.$store.dispatch("addUserGroupAssociation",{UserId:e.Id,UserGroupId:t}))},colorchange:function(e,t){this.$store.dispatch("updateUserGroup",{id:t,color:e.srcElement.value})}}};r("906c");const yt=Se()(jt,[["render",gt],["__scopeId","data-v-0221899a"]]);var vt=yt,It=function(e){return Object(n["p"])("data-v-918b00a8"),e=e(),Object(n["o"])(),e},kt={key:0},St=It((function(){return Object(n["h"])("div",null,"U",-1)})),Ut=It((function(){return Object(n["h"])("div",null,"A",-1)})),Nt=[St,Ut],wt={key:1},Dt=Object(n["i"])("Catergories Setup"),Et=Object(n["i"])("Users Setup"),Ct=Object(n["i"])("Analysis"),Tt=Object(n["i"])("Query Generator"),Rt=Object(n["i"])("SQL Playground"),xt=It((function(){return Object(n["h"])("i",{class:"fas fa-angle-double-left"},null,-1)})),Gt=[xt];function At(e,t,r,a,s,c){var o=Object(n["u"])("SidebarLink");return Object(n["n"])(),Object(n["g"])("div",{class:"sidebar",style:Object(n["m"])({width:a.sidebarWidth})},[Object(n["h"])("h1",null,[a.collapsed?(Object(n["n"])(),Object(n["g"])("span",kt,Nt)):(Object(n["n"])(),Object(n["g"])("span",wt,"Uptale Analysis"))]),Object(n["j"])(o,{onSidebar_click:t[0]||(t[0]=function(t){return e.$emit("sidebar_click","categories")}),icon:"fas fa-edit"},{default:Object(n["x"])((function(){return[Dt]})),_:1}),Object(n["j"])(o,{onSidebar_click:t[1]||(t[1]=function(t){return e.$emit("sidebar_click","Users")}),icon:"fas fa-edit"},{default:Object(n["x"])((function(){return[Et]})),_:1}),Object(n["j"])(o,{onSidebar_click:t[2]||(t[2]=function(t){return e.$emit("sidebar_click","Analysis")}),icon:"fas fa-file-csv"},{default:Object(n["x"])((function(){return[Ct]})),_:1}),Object(n["j"])(o,{onSidebar_click:t[3]||(t[3]=function(t){return e.$emit("sidebar_click","QueryGenerator")}),icon:"fab fa-searchengin"},{default:Object(n["x"])((function(){return[Tt]})),_:1}),Object(n["j"])(o,{onSidebar_click:t[4]||(t[4]=function(t){return e.$emit("sidebar_click","SQL")}),icon:"fas fa-database"},{default:Object(n["x"])((function(){return[Rt]})),_:1}),Object(n["h"])("span",{class:Object(n["l"])(["collapse-icon",{"rotate-180":a.collapsed}]),onClick:t[5]||(t[5]=function(){return a.toggleSidebar&&a.toggleSidebar.apply(a,arguments)})},Gt,2)],4)}var Lt={key:0};function $t(e,t,r,a,s,c){return Object(n["n"])(),Object(n["g"])("div",{class:"sidebarlink",onClick:t[0]||(t[0]=function(t){return e.$emit("sidebar_click")})},[Object(n["h"])("i",{class:Object(n["l"])(["icon",r.icon])},null,2),Object(n["j"])(n["b"],{name:"fade"},{default:Object(n["x"])((function(){return[a.collapsed?Object(n["f"])("",!0):(Object(n["n"])(),Object(n["g"])("span",Lt,[Object(n["t"])(e.$slots,"default",{},void 0,!0)]))]})),_:3})])}var _t=Object(n["r"])(!1),Wt=function(){return _t.value=!_t.value},Mt=180,Pt=38,Ft=Object(n["c"])((function(){return"".concat(_t.value?Pt:Mt,"px")})),Ht={emits:["sidebar_click"],props:{icon:{type:String,required:!0}},setup:function(e){return{collapsed:_t}}};r("ddfd");const Vt=Se()(Ht,[["render",$t],["__scopeId","data-v-20a26c90"]]);var qt=Vt,zt={emits:["sidebar_click"],props:{},components:{SidebarLink:qt},setup:function(){return{collapsed:_t,toggleSidebar:Wt,sidebarWidth:Ft}}};r("37cd"),r("111c");const Jt=Se()(zt,[["render",At],["__scopeId","data-v-918b00a8"]]);var Bt=Jt,Qt=["value"],Yt={key:1,id:"progressMessage"};function Kt(e,t,r,a,s,c){var o=Object(n["u"])("FileLoader");return Object(n["n"])(),Object(n["g"])("header",null,[c.progress.progress>0&&c.progress.progress<100?(Object(n["n"])(),Object(n["g"])("progress",{key:0,id:"progress",max:"100",value:c.progress.progress},null,8,Qt)):Object(n["f"])("",!0),c.progress.progress>0&&c.progress.progress<100?(Object(n["n"])(),Object(n["g"])("pre",Yt,Object(n["v"])(c.progress.message),1)):Object(n["f"])("",!0),Object(n["h"])("h1",null,Object(n["v"])(r.title),1),Object(n["j"])(o,{onDownloadDatabase:t[0]||(t[0]=function(t){return e.$emit("downloadDatabase")}),isLoading:c.isLoading,serializedDatabase:r.serializedDatabase},null,8,["isLoading","serializedDatabase"])])}var Xt=function(e){return Object(n["p"])("data-v-59e9c1b0"),e=e(),Object(n["o"])(),e},Zt={id:"accessButtons"},er=Xt((function(){return Object(n["h"])("i",{class:"fas fa-play-circle icon"},null,-1)})),tr=[er],rr={key:1},nr=Xt((function(){return Object(n["h"])("i",{class:"fas fa-spinner fa-pulse icon"},null,-1)})),ar=[nr],sr={key:2},cr=Xt((function(){return Object(n["h"])("i",{class:"fas fa-spinner fa-spin icon"},null,-1)})),or=[cr],ir=Xt((function(){return Object(n["h"])("i",{class:"fas fa-upload icon"},null,-1)})),ur=[ir],dr=Xt((function(){return Object(n["h"])("i",{class:"fas fa-download icon"},null,-1)})),lr=[dr];function pr(e,t,r,a,s,c){var o=Object(n["u"])("Prompt");return Object(n["n"])(),Object(n["g"])(n["a"],null,[Object(n["h"])("div",Zt,[r.isLoading?Object(n["f"])("",!0):(Object(n["n"])(),Object(n["g"])("span",{key:0,onClick:t[0]||(t[0]=function(){return c.startAnalysis&&c.startAnalysis.apply(c,arguments)})},tr)),1==r.isLoading?(Object(n["n"])(),Object(n["g"])("span",rr,ar)):Object(n["f"])("",!0),2==r.isLoading?(Object(n["n"])(),Object(n["g"])("span",sr,or)):Object(n["f"])("",!0),Object(n["h"])("span",{onClick:t[1]||(t[1]=function(e){return s.currentWindow="upload"})},ur),Object(n["h"])("span",{onClick:t[2]||(t[2]=function(){return c.getSerializedDatabase&&c.getSerializedDatabase.apply(c,arguments)})},lr)]),"upload"==s.currentWindow?(Object(n["n"])(),Object(n["e"])(o,{key:0,data:s.fields,onFileChange:c.fileChange,onCurrentWindowChange:t[3]||(t[3]=function(e){return s.currentWindow=e}),type:"largePanels"},null,8,["data","onFileChange"])):Object(n["f"])("",!0)],64)}r("a9e3"),r("5cc6"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),r("b680"),r("b64b");var fr={class:"prompt"},br={key:0,id:"content"},mr=["for"],Or=["id","name","accept"],hr={key:1,id:"list"},gr=["href"];function jr(e,t,r,a,s,c){return Object(n["n"])(),Object(n["g"])("div",fr,[Object(n["h"])("div",{id:"background",onClick:t[0]||(t[0]=function(t){return e.$emit("currentWindowChange",null)})}),"largePanels"==r.type?(Object(n["n"])(),Object(n["g"])("div",br,[(Object(n["n"])(!0),Object(n["g"])(n["a"],null,Object(n["s"])(r.data,(function(r){var a;return Object(n["n"])(),Object(n["g"])("div",{key:r.name,onClick:t[2]||(t[2]=function(){return c.uploadFile&&c.uploadFile.apply(c,arguments)})},[Object(n["h"])("label",{for:r.name},Object(n["v"])(r.label),9,mr),Object(n["h"])("input",{type:"file",id:r.name,name:r.name,accept:"."+r.format,onChange:t[1]||(t[1]=function(t){return e.$emit("fileChange",t)})},null,40,Or),Object(n["h"])("i",null,Object(n["v"])(r.file?r.file.name+" "+((null===(a=r.file)||void 0===a?void 0:a.size)/1e6).toFixed(2)+"MB":""),1)])})),128))])):Object(n["f"])("",!0),"propList"==r.type?(Object(n["n"])(),Object(n["g"])("div",hr,[(Object(n["n"])(!0),Object(n["g"])(n["a"],null,Object(n["s"])(r.data,(function(r,a){return Object(n["n"])(),Object(n["g"])("div",{key:r.Scene,onClick:t[3]||(t[3]=function(){return e.downloadFile&&e.downloadFile.apply(e,arguments)})},[Object(n["h"])("a",{href:"data:text/csv;charset=utf-8,"+encodeURIComponent(c.csvFormat(r))},Object(n["v"])(a),9,gr),Object(n["i"])(" "+Object(n["v"])("".concat(Object.keys(r).length," Utilisateurs")),1)])})),128))])):Object(n["f"])("",!0)])}var yr=r("898b"),vr={name:"Prompt",emits:["fileChange","currentWindowChange"],components:{},data:function(){return{}},props:{data:Object,type:String},created:function(){},methods:{uploadFile:function(e){"DIV"==e.target.tagName&&e.target.querySelector("input").click()},csvFormat:function(e){return yr["a"](Object.values(e))}}};r("4905");const Ir=Se()(vr,[["render",jr],["__scopeId","data-v-09cc5462"]]);var kr=Ir,Sr={name:"FileLoader",components:{Prompt:kr},data:function(){return{currentWindow:"",isLoadingSerializedDatabase:0,fields:[{name:"detail",label:"Select detail data file file here",defaultPath:"/detail.csv",format:"csv"},{name:"database",label:"Select database file here",defaultPath:"/database.db",format:"db"}]}},props:{isLoading:Number,perUserAnswers:Object,serializedDatabase:[]},emits:["updateSerializedDatabase","downloadDatabase"],created:function(){},methods:{load_file:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=function(e){return new Promise((function(t,r){var n=new FileReader;n.onload=function(){t(n.result)},n.onerror=r,n.readAsText(e)}))},e.prev=1,e.next=4,r(t);case 4:a=e.sent,n=d3.csvParse(a,d3.autoType),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),console.log(e.t0);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));function t(t){return e.apply(this,arguments)}return t}(),startAnalysis:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=[],r={},t.push(void 0!=this.fields[0].file?this.load_file(this.fields[0].file):d3[this.fields[0].format](this.fields[0].defaultPath)),!this.fields[1].file){e.next=11;break}return e.t0=Uint8Array,e.next=7,this.fields[1].file.arrayBuffer();case 7:e.t1=e.sent,r.database=new e.t0(e.t1),e.next=24;break;case 11:return e.next=13,fetch("./database.db");case 13:return e.next=15,e.sent.blob();case 15:if(e.t2=e.sent.type,"application/x-sql; charset=utf-8"!=e.t2){e.next=24;break}return e.t3=Uint8Array,e.next=20,fetch("./database.db");case 20:return e.next=22,e.sent.arrayBuffer();case 22:e.t4=e.sent,r.database=new e.t3(e.t4);case 24:return e.next=26,Promise.all(t);case 26:n=e.sent,r[this.fields[0].name]=n[0],this.$store.dispatch("computeData",r);case 29:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fileChange:function(e){this.fields.find((function(t){return t.name==e.target.id})).file=e.target.files[0]},mapToArray:function(e){return $e(e)},getSerializedDatabase:function(){this.isLoadingSerializedDatabase=1,this.$emit("downloadDatabase")}}};r("49e5");const Ur=Se()(Sr,[["render",pr],["__scopeId","data-v-59e9c1b0"]]);var Nr=Ur,wr={name:"Header",components:{FileLoader:Nr},emits:["filesLoaded","updateSerializedDatabase","downloadDatabase"],computed:{isLoading:function(){return this.$store.state.IsLoading},progress:function(){return this.$store.state.progress}},props:{serializedDatabase:[],title:{type:String,default:"[Insert Title here]"},perUserAnswers:Object},methods:{filesLoaded:function(e){this.$emit("filesLoaded",e)}}};r("1603");const Dr=Se()(wr,[["render",Kt],["__scopeId","data-v-43ba0926"]]);var Er=Dr,Cr={name:"App",components:{Header:Er,SceneList:Re,Sidebar:Bt,Analysis:st,SQLPlayground:ze,UsersSetup:vt,QueryGenerator:Ke},data:function(){return{title:"VR@COVID Paths Analysis",computeWorker:Worker,serializedDatabase:"",serializedDatabaseURL:"",display:"SQL",sqlDebugData:{columns:[],values:[]}}},setup:function(){return{sidebarWidth:Ft}},methods:{sidebarManager:function(e){this.display=e},sceneUpdate:function(e){this.scenes.set(e.id,e),this.updateAndComputePaths()},getSerializedDatabase:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.state.sqlWorker.send({id:e.$store.state.sqlWorker.id,action:"export"});case 2:return r=t.sent.results,e.$store.commit("incrementWorkerId"),t.abrupt("return",new Blob([r],{type:"application/octet-stream"}));case 5:case"end":return t.stop()}}),t)})))()},downloadDatabase:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=1,t.next=3,e.getSerializedDatabase();case 3:e.serializedDatabase=t.sent,URL.revokeObjectURL(e.serializedDatabaseURL),e.serializedDatabaseURL=URL.createObjectURL(e.serializedDatabase),e.loading=0,download.setAttribute("href",e.serializedDatabaseURL),download.click();case 9:case"end":return t.stop()}}),t)})))()}}};r("c82b");const Tr=Se()(Cr,[["render",se]]);var Rr=Tr,xr=(r("7051"),Object(n["d"])(Rr));xr.use(X),xr.mount("#app")},"6c3b":function(e,t,r){},"6f2d":function(e,t,r){},"780e":function(e,t,r){},"7bde":function(e,t,r){},"8a3c":function(e,t,r){"use strict";r("063f")},"906c":function(e,t,r){"use strict";r("d314")},"93a8":function(e,t,r){"use strict";r("7bde")},a767:function(e,t,r){},a869:function(e,t,r){"use strict";r("19b0")},ab01:function(e,t,r){},aeb1:function(e,t,r){},b869:function(e,t,r){"use strict";r("332b")},c4dd:function(e,t,r){"use strict";r("5261")},c82b:function(e,t,r){"use strict";r("4d9d")},d314:function(e,t,r){},dc8a:function(e,t,r){"use strict";r("780e")},ddfd:function(e,t,r){"use strict";r("221b")},e2b3:function(e,t,r){},eba0:function(e,t,r){"use strict";r("6c3b")}});
//# sourceMappingURL=app.dd864095.js.map